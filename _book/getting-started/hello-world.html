<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Hello World! Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="In main.js there&#39;s just one function run which starts the application.">
        <meta name="generator" content="GitBook 3.0.0-pre.5">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../gif-viewer/" />
    
    
    <link rel="prev" href="necessary-boilerplate.html" />
    

    </head>
    <body>
        
<div class="book"
    data-level="1.2"
    data-chapter-title="Hello World!"
    data-filepath="getting-started/hello-world.md"
    data-basepath="../../docs"
    data-revision="Thu Apr 07 2016 13:34:34 GMT+0200 (CEST)"
    data-innerlanguage="">
    

<div class="book-summary">
    
    <nav role="navigation">
        <ul class="summary">
            
            

            


            
            
    
        <li class="chapter " data-level="0" data-path="../">
            
                <a href="../">
            
                    
                    Why the Elm Architecture matters?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.</b>
                    
                    Getting Started Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="necessary-boilerplate.html">
            
                <a href="necessary-boilerplate.html">
            
                    
                        <b>1.1.</b>
                    
                    Necessary boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="hello-world.html">
            
                <a href="hello-world.html">
            
                    
                        <b>1.2.</b>
                    
                    Hello World!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="../gif-viewer/">
            
                <a href="../gif-viewer/">
            
                    
                        <b>2.</b>
                    
                    GifViewer tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="../gif-viewer/shaping-model.html">
            
                <a href="../gif-viewer/shaping-model.html">
            
                    
                        <b>2.1.</b>
                    
                    Shaping out initial Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../gif-viewer/rendering-view.html">
            
                <a href="../gif-viewer/rendering-view.html">
            
                    
                        <b>2.2.</b>
                    
                    Rendering View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../gif-viewer/side-effects.html">
            
                <a href="../gif-viewer/side-effects.html">
            
                    
                        <b>2.3.</b>
                    
                    AJAX &amp; Side Effects in practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../gif-viewer/unit-tests.html">
            
                <a href="../gif-viewer/unit-tests.html">
            
                    
                        <b>2.4.</b>
                    
                    Writing Unit Tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="../composition/">
            
                <a href="../composition/">
            
                    
                        <b>3.</b>
                    
                    Composition
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="../composition/action-composition.html">
            
                <a href="../composition/action-composition.html">
            
                    
                        <b>3.1.</b>
                    
                    Action Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../composition/example/">
            
                <a href="../composition/example/">
            
                    
                        <b>3.2.</b>
                    
                    Real Composition Example
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../composition/example/updater-composition.html">
            
                <a href="../composition/example/updater-composition.html">
            
                    
                        <b>3.2.1.</b>
                    
                    Updater Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../composition/example/action-composition-practice.html">
            
                <a href="../composition/example/action-composition-practice.html">
            
                    
                        <b>3.2.2.</b>
                    
                    Action Composition in practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../composition/example/matchers.html">
            
                <a href="../composition/example/matchers.html">
            
                    
                        <b>3.2.3.</b>
                    
                    Introduction Matchers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../composition/example/utilizing-matchers.html">
            
                <a href="../composition/example/utilizing-matchers.html">
            
                    
                        <b>3.2.4.</b>
                    
                    Utilizing Matchers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../composition/example/public-interface.html">
            
                <a href="../composition/example/public-interface.html">
            
                    
                        <b>3.2.5.</b>
                    
                    Using public interface
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../composition/dynamic-list/">
            
                <a href="../composition/dynamic-list/">
            
                    
                        <b>3.3.</b>
                    
                    Dynamic List of Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../composition/dynamic-list/updater-parameterized-matcher.html">
            
                <a href="../composition/dynamic-list/updater-parameterized-matcher.html">
            
                    
                        <b>3.3.1.</b>
                    
                    Updater with ParmeterizedMatcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="../custom-matchers/">
            
                <a href="../custom-matchers/">
            
                    
                        <b>4.</b>
                    
                    Custom Matchers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="../custom-matchers/writing-custom-matcher.html">
            
                <a href="../custom-matchers/writing-custom-matcher.html">
            
                    
                        <b>4.1.</b>
                    
                    Writing Custom Matcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            <li class="divider"></li>
            

            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
        </ul>
    </nav>
    
</div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    
<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../docs" >Hello World!</a>
    </h1>
</div>



                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            <section class="normal markdown-section">
                            
                            <h2 id="hello-world">Hello World!</h2>
<p>In <code>main.js</code> there&apos;s just one function <code>run</code> which starts the application.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> run <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./boilerplate&apos;</span>;

<span class="hljs-keyword">import</span> view <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./hello-world/view&apos;</span>;
<span class="hljs-keyword">import</span> updater <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./hello-world/updater&apos;</span>;

run(<span class="hljs-string">&apos;app&apos;</span>, view, updater);
</code></pre>
<p><code>run</code> starts the application and you only need to provide <strong>Root component</strong>. Every Elmish component consists of two parts <strong>Updater</strong> and <strong>View</strong>. We call the component Root component because it&apos;s typical for Elmish architecture that application is modeled in form of component tree and every tree has its root. In Hello World example we will have just one component therefore it&apos;s also Root component.</p>
<p><code>run</code> takes three arguments:</p>
<ul>
<li>first argument is <code>id</code> attribute of HTML node we would like to mount the component in. In <code>redux-elm-skeleton</code>, its &apos;app&apos; because there&apos;s <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code> inside our <code>index.html</code>.</li>
<li>second argument is <code>view</code> which is just plain old React component, it can be either <code>class</code> which <code>extends</code> from <code>Component</code> or a stateless function.</li>
<li>third argument is <code>updater</code>, Updater is very similiar to <a href="http://redux.js.org/docs/basics/Reducers.html" target="_blank">Redux Reducer</a> except it&apos;s not plain old JavaScript function but it&apos;s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank">generator</a> function.</li>
</ul>
<p>Let&apos;s have a look at <code>view.js</code> inside <code>hello-world</code> repository:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ({ model, dispatch }) =&gt; {
  <span class="hljs-keyword">if</span> (model.greeted) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: &apos;SayHi&apos; })}&gt;Say Hi<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
  }
};
</code></pre>
<p>There&apos;s basically nothing special about the View, it&apos;s just a stateless function which conditionally returns either Greeting or Button. Every View gets at least two mandatory <code>props</code>:</p>
<ol>
<li><code>dispatch</code> - this is a plain old <a href="http://redux.js.org/docs/api/Store.html#dispatch" target="_blank">Redux dispatch function</a>, we can use this function for dispatching an action</li>
<li><code>model</code> - This is a model for specific View, based on the model we can render some markup. In other words (mathematical words) View is function of Model. <strong>You can only query the model in View, all mutations happens in Updater</strong>.</li>
</ol>
<p>Think of your View as a declarative definition of how the HTML markup should look like based on the state of Model.</p>
<p>Trickier part is Updater.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { Updater, Matchers } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-elm&apos;</span>;

<span class="hljs-keyword">const</span> initialModel = {
  greeted: <span class="hljs-literal">false</span>
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(initialModel, Matchers.exactMatcher)
  .case(<span class="hljs-string">&apos;SayHi&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> {
      ...model,
      greeted: <span class="hljs-literal">true</span>
    };
  })
  .toReducer();
</code></pre>
<p>For now think about your Updater as series of functions which gets applied onto Model whenever an action matches provided pattern.</p>
<p>When implementing Updater there are two conditions which every Updater must meet:</p>
<ol>
<li>Every Updater must be provided with initial Model. Initial Model is first argument of the <code>Updater</code> constructor, the argument can be basically any type (except Function, only Generator Function is allowed) you can think of: String, Object, Number</li>
<li>Every Updater must be converted to Reducer by calling <code>toReducer()</code> method on the Updater instance.</li>
</ol>
<p>Please ignore the second argument of <code>Updater</code> constructor now, we&apos;ll explain this in following chapters, for now you always use <code>Matchers.exactMatcher</code> imported from <code>redux-elm</code> package.</p>
<p>Updater in its simplest form could look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { Updater, Matchers } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-elm&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(<span class="hljs-number">0</span>, Matchers.exactMatcher)
  .toReducer();
</code></pre>
<p>Model consist of Integer with its initial value 0.</p>
<p>Now imagine following View:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ({ model, dispatch }) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{model}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>Afte running the application you&apos;d see only 0 on the screen because it&apos;s initial value of the model and we&apos;ve defined this in the Updater.</p>
<p><img src="../assets/3.png" alt="hello-world-app-3"></p>
<p>However, this Updater is not really handy, because it does not define any mutations on the model. In real world applications, you want to allow user to interact with the UI and interaction with the UI is basically some mutation of the Model. Something like: Whenever user clicks this button, a boolean flag in the model should be set to 1 and because as I&apos;ve already mentioned, our View is a function of Model, we could define how markup should look like when the flag is truthy, for example we can display Greeting message.</p>
<p>To define the mutation we need to say when it should happen and that&apos;s where <strong><code>dispatch</code></strong> function in the View comes handy.</p>
<pre><code class="lang-javascript">&lt;button onClick={() =&gt; dispatch({ type: &apos;SayHi&apos; })}&gt;Say Hi&lt;/button&gt;;
</code></pre>
<p>When user clicks the button we will dispatch an Action with type <code>SayHi</code> it&apos;s just a declarative description of some Event. When Action is dispatched, it also needs to be handled and it should be handled in appropriate Updater and that&apos;s exactly where <strong><code>case</code></strong> method comes handy:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(initialModel, Matchers.exactMatcher)
  .case(<span class="hljs-string">&apos;SayHi&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> {
      ...model,
      greeted: <span class="hljs-literal">true</span>
    };
  })
  .toReducer();
</code></pre>
<p>We are defininig the mutation of model in the Updater by using <code>case</code> method. It has two required arguments:</p>
<ol>
<li>A String pattern for matching the Action and because we are using <code>Matchers.exactMatcher</code>, as default Matcher for the entire Updater, it will be also used for this specific <code>case</code> matching. We can override the default matching implementation by providing a matcher as third argument to <code>case</code> method. <code>Matchers.exactMatcher</code> is expecting exact match of Action type and provided pattern, therefore only action with type <code>SayHi</code> will match (We will cover this later in Composition section)</li>
<li>An updater generator function which is responsible for the mutation onto Model.</li>
</ol>
<p>The third argument is optional and it&apos;s Matcher implementation but we will cover this in later chapters.</p>
<p>Let&apos;s take a closer look at Updater function:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-keyword">return</span> {
    ...model,
    greeted: <span class="hljs-literal">true</span>
  };
}
</code></pre>
<p>As you can see all it does, it just takes current model as argument and outputs new model which has been somehow mutated. It&apos;s very important that you <strong>always return a new reference of the model in the Updater function</strong>, otherwise <code>redux</code> wouldn&apos;t know that Model changed and therefore wouldn&apos;t re-render your View. That&apos;s why we utilize ES2015 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank">spread operator</a> because it gives us new copy of the model and we&apos;ll just change field (<code>greeted</code>) which we want.</p>
<h3 id="side-effects">Side Effects</h3>
<p>You might have spotted asterisk symbol in function definition:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{

}
</code></pre>
<p>The asterisk in function defintion means that the function is generator. <strong>redux-elm takes heavy assumption that all your Updater functions must be Generators</strong>, this prejudice is especially very useful when working with side effects in the Updaters. We&apos;ve already covered the part where we said that Updaters defines mutations of the Model. In other words Updater function takes Model as the input and outputs new Model which has been somehow changed. You might have spotted again a similarity with mathematical function.</p>
<pre><code>y = f(x);
</code></pre><p>or</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> value = <span class="hljs-built_in">Math</span>.sin(<span class="hljs-built_in">Math</span>.PI);
</code></pre>
<p>or</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> currentModel = updater(previousModel, action);
</code></pre>
<p>See the similarities? Calling <code>Math.sin</code> does not execute any side effects, it means that it does not mutate anything outside the function nor causing anything that is not related with the function itself (XHR calls, logging...). In Functional Programming lingo when we talk about function without side effects we most likely talk about <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank">Pure function</a>. Pure function is a function which does not execute any side effects and given the same arguments the result of the function is still the same. In Redux, all the Reducers must be Pure so that we can leverage all the nice features:</p>
<ul>
<li>Easy unit testing</li>
<li>Time travel</li>
<li>Devtools</li>
<li>Undo/Redo</li>
<li>... and many others</li>
</ul>
<p>For example calling <code>console.log</code> directly in the Updater would be considered an impurity and therefore the Updater (Reducer) wouldn&apos;t be Pure function.</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">updater</span>(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is impurity&apos;</span>);

  <span class="hljs-keyword">return</span> model + <span class="hljs-number">1</span>;
}
</code></pre>
<p>Let&apos;s take a closer look at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank">Generators</a>, we&apos;ll not dive into details but Generator function is basically same like plain old JavaScript function except it can <code>yield</code> values. We can leverage that fact and use <code>yield</code> keyword for &quot;yielding&quot; side effects. Just imagine you wrap all the side effects in functions and then just yield these functions. These functions will not be executed inside the Updater, they just declaratively describes some side effect, the execution of the side effect is hidden in the function.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> sideEffect = () =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is execution of some side effect&apos;</span>);
}
</code></pre>
<p>See? Unless you call the function, the side effect is not executed and therefore if we <code>yield</code> these functions in our Updaters we can keep them pure and that&apos;s the ultimate goal. Nice thing about Generators is that you can <code>yield</code> as many values as you need.</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">updater</span>(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-keyword">yield</span> () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is first impurity&apos;</span>);
  <span class="hljs-keyword">yield</span> () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is second impurity&apos;</span>);

  <span class="hljs-keyword">return</span> model + <span class="hljs-number">1</span>;
}
</code></pre>
<p>This Updater function yields two side effects <strong>which are not executed</strong> in the Updater and it also returns mutated Model. We said that these side effects are not executed, but how are these side effects useful when they are not executed? A good message for you, there&apos;s a library for Redux, which is also used in <code>redux-elm-skeleton</code>. The library is called <a href="https://github.com/salsita/redux-side-effects" target="_blank">redux-side-effects</a> which is doing exactly what we need, it collects all the yielded values in Updater and executes them &quot;out of order&quot; so that they are executed right after updater mutates the Model.</p>

                            
                            </section>
                        </div>
                    </div>
                
            </div>

            
                
                <a href="necessary-boilerplate.html" class="navigation navigation-prev " aria-label="Previous page: Necessary boilerplate">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../gif-viewer/" class="navigation navigation-next " aria-label="Next page: GifViewer tutorial">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>
</div>

        
    <script src="../gitbook/app.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
    <script>
    require(["gitbook"], function(gitbook) {
        gitbook.start({"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"livereload":{}});
    });
    </script>

    </body>
</html>
