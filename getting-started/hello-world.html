<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Hello World! Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="In main.js there&#39;s just a single run function that starts the application.">
        <meta name="generator" content="GitBook 3.0.0-pre.5">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../gif-viewer/" />
    
    
    <link rel="prev" href="necessary-boilerplate.html" />
    

    </head>
    <body>
        
<div class="book"
    data-level="1.2"
    data-chapter-title="Hello World!"
    data-filepath="getting-started/hello-world.md"
    data-basepath="../../docs"
    data-revision="Mon May 02 2016 10:43:52 GMT+0200 (CEST)"
    data-innerlanguage="">
    

<div class="book-summary">
    
    <nav role="navigation">
        <ul class="summary">
            
            

            


            
            
    
        <li class="chapter " data-level="0" data-path="../">
            
                <a href="../">
            
                    
                    Why the Elm Architecture matters?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.</b>
                    
                    Getting Started Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="necessary-boilerplate.html">
            
                <a href="necessary-boilerplate.html">
            
                    
                        <b>1.1.</b>
                    
                    Necessary boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="hello-world.html">
            
                <a href="hello-world.html">
            
                    
                        <b>1.2.</b>
                    
                    Hello World!
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="../gif-viewer/">
            
                <a href="../gif-viewer/">
            
                    
                        <b>2.</b>
                    
                    GifViewer tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="../gif-viewer/shaping-model.html">
            
                <a href="../gif-viewer/shaping-model.html">
            
                    
                        <b>2.1.</b>
                    
                    Shaping out initial Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../gif-viewer/rendering-view.html">
            
                <a href="../gif-viewer/rendering-view.html">
            
                    
                        <b>2.2.</b>
                    
                    Rendering View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../gif-viewer/side-effects.html">
            
                <a href="../gif-viewer/side-effects.html">
            
                    
                        <b>2.3.</b>
                    
                    AJAX &amp; Side Effects in practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../gif-viewer/unit-tests.html">
            
                <a href="../gif-viewer/unit-tests.html">
            
                    
                        <b>2.4.</b>
                    
                    Writing Unit Tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="../composition/">
            
                <a href="../composition/">
            
                    
                        <b>3.</b>
                    
                    Composition
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="../composition/action-composition.html">
            
                <a href="../composition/action-composition.html">
            
                    
                        <b>3.1.</b>
                    
                    Action Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../composition/example/">
            
                <a href="../composition/example/">
            
                    
                        <b>3.2.</b>
                    
                    Real Composition Example
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../composition/example/updater-composition.html">
            
                <a href="../composition/example/updater-composition.html">
            
                    
                        <b>3.2.1.</b>
                    
                    Updater Composition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../composition/example/action-composition-practice.html">
            
                <a href="../composition/example/action-composition-practice.html">
            
                    
                        <b>3.2.2.</b>
                    
                    Action Composition in practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../composition/example/matchers.html">
            
                <a href="../composition/example/matchers.html">
            
                    
                        <b>3.2.3.</b>
                    
                    Introduction Matchers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../composition/example/utilizing-matchers.html">
            
                <a href="../composition/example/utilizing-matchers.html">
            
                    
                        <b>3.2.4.</b>
                    
                    Utilizing Matchers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../composition/example/public-interface.html">
            
                <a href="../composition/example/public-interface.html">
            
                    
                        <b>3.2.5.</b>
                    
                    Using public interface
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../composition/dynamic-list/">
            
                <a href="../composition/dynamic-list/">
            
                    
                        <b>3.3.</b>
                    
                    Dynamic List of Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../composition/dynamic-list/updater-parameterized-matcher.html">
            
                <a href="../composition/dynamic-list/updater-parameterized-matcher.html">
            
                    
                        <b>3.3.1.</b>
                    
                    Updater with ParmeterizedMatcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="../custom-matchers/">
            
                <a href="../custom-matchers/">
            
                    
                        <b>4.</b>
                    
                    Custom Matchers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="../custom-matchers/writing-custom-matcher.html">
            
                <a href="../custom-matchers/writing-custom-matcher.html">
            
                    
                        <b>4.1.</b>
                    
                    Writing Custom Matcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="../static-typing/">
            
                <a href="../static-typing/">
            
                    
                        <b>5.</b>
                    
                    Static Typing - FlowType
            
                </a>
            

            
        </li>
    

            <li class="divider"></li>
            

            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
        </ul>
    </nav>
    
</div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    
<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../docs" >Hello World!</a>
    </h1>
</div>



                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            <section class="normal markdown-section">
                            
                            <h2 id="hello-world">Hello World!</h2>
<p>In <code>main.js</code> there&apos;s just a single <code>run</code> function that starts the application.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> run <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./boilerplate&apos;</span>;

<span class="hljs-keyword">import</span> view <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./hello-world/view&apos;</span>;
<span class="hljs-keyword">import</span> updater <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./hello-world/updater&apos;</span>;

run(<span class="hljs-string">&apos;app&apos;</span>, view, updater);
</code></pre>
<p><code>run</code> starts the application; you only need to provide the <strong>Root Component</strong>. Every Elmish component consists of two parts: <strong>Updater</strong> and <strong>View</strong>. We call it the Root Component because a typical Elmish architecture is modeled in form of a component tree, and every tree has a root. In the Hello World example we have just one component, so it&apos;s the Root Component by default.</p>
<p><code>run</code> takes three arguments:</p>
<ul>
<li>the first argument is the <code>id</code> attribute of the HTML node we would like to mount the component on. In <code>redux-elm-skeleton</code>, it is app&apos; because there is <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code> inside our <code>index.html</code>.</li>
<li>the second argument is <code>view</code>, which is just a plain old React component. It can be either a <code>class</code> which <code>extends</code> from <code>Component</code> or a stateless function.</li>
<li>the third argument is <code>updater</code>, An Updater is very similiar to a <a href="http://redux.js.org/docs/basics/Reducers.html" target="_blank">Redux Reducer</a> except it&apos;s not a plain old JavaScript function, it&apos;s a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank">generator</a> function.</li>
</ul>
<p>Let&apos;s have a look at <code>view.js</code> inside the <code>hello-world</code> repository:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ({ model, dispatch }) =&gt; {
  <span class="hljs-keyword">if</span> (model.greeted) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: &apos;SayHi&apos; })}&gt;Say Hi<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
  }
};
</code></pre>
<p>There&apos;s basically nothing special about the View, it&apos;s just a stateless function which conditionally returns either a greeting or a button. Every View receives at least two mandatory <code>props</code>:</p>
<ol>
<li><code>dispatch</code> - The regular <a href="http://redux.js.org/docs/api/Store.html#dispatch" target="_blank">Redux dispatch function</a>used for dispatching an action</li>
<li><code>model</code> - The Model to be used by the View. We render markup based on this Model. In other (mathematical) words, the View is function of the Model. <strong>In the View the Model can only be queried, with any mutations happening in an Updater</strong>.</li>
</ol>
<p>Think of your View as a declarative definition of how the HTML markup should look based on the Model.</p>
<p>The Updater is a bit tricker:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { Updater, Matchers } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-elm&apos;</span>;

<span class="hljs-keyword">const</span> initialModel = {
  greeted: <span class="hljs-literal">false</span>
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(initialModel, Matchers.exactMatcher)
  .case(<span class="hljs-string">&apos;SayHi&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> {
      ...model,
      greeted: <span class="hljs-literal">true</span>
    };
  })
  .toReducer();
</code></pre>
<p>For now, think of your Updater as a series of functions which are applied to the Model whenever an action matches the provided pattern.</p>
<p>When implementing an Updater, there are two conditions it must meet:</p>
<ol>
<li>Every Updater must be provided with an initial Model. The initial Model is the first argument of the <code>Updater</code> constructor and can be basically any type (except a function, since only generator Functions are allowed): <code>String</code>, <code>Object</code>, <code>Number</code>, etc.</li>
<li>Every Updater must be converted to a Reducer by calling the <code>toReducer()</code> method on the Updater instance.</li>
</ol>
<p>Please ignore the second argument of the <code>Updater</code> constructor now. We&apos;ll explain this later. For now we will always use <code>Matchers.exactMatcher</code>, imported from the <code>redux-elm</code> package.</p>
<p>An Updater in its simplest form could look like this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { Updater, Matchers } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-elm&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(<span class="hljs-number">0</span>, Matchers.exactMatcher)
  .toReducer();
</code></pre>
<p>The Model consists of an <code>Integer</code> with an initial value of 0.</p>
<p>Now imagine the following View:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ({ model, dispatch }) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{model}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
</code></pre>
<p>Afte running the application you&apos;ll only see 0 on the screen because it&apos;s the initial value of the Model.</p>
<p><img src="../assets/3.png" alt="hello-world-app-3"></p>
<p>However, this Updater pretty useless since it does not define any mutations on the model. In a real-world application, you want to allow the user to interact with the UI, resulting in some mutation of the Model. For instance: Whenever the user clicks a button, a boolean flag in the Model should be set. Because, as I&apos;ve already mentioned, our View is a function of the Model, we can define how our page should look when the flag is truthy, such as displaying the greeting message.</p>
<p>To define the mutation we need to say when it should happen, and that&apos;s where the <strong><code>dispatch</code></strong> function passed to the View is used:</p>
<pre><code class="lang-javascript">&lt;button onClick={() =&gt; dispatch({ type: &apos;SayHi&apos; })}&gt;Say Hi&lt;/button&gt;;
</code></pre>
<p>When the user clicks the button we dispatch an Action with type <code>SayHi</code>. THis object is just a declarative description of some Event. When an Action is dispatched, it should be handled in tbe appropriate Updater. This is exactly where the <strong><code>case</code></strong> method comes in handy:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Updater(initialModel, Matchers.exactMatcher)
  .case(<span class="hljs-string">&apos;SayHi&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
    <span class="hljs-keyword">return</span> {
      ...model,
      greeted: <span class="hljs-literal">true</span>
    };
  })
  .toReducer();
</code></pre>
<p>We are defining the mutation of the Model in the Updater using <code>case</code> method. It has two required arguments:</p>
<ol>
<li>A String pattern for matching the Action. Because we are using <code>Matchers.exactMatcher</code>, as default the Matcher for this Updater, it will be used for this <code>case</code> without having to specify it explicitly. We therefore expect the Action type to exactly match the provided pattern.</li>
<li>An Updater generator function which is responsible for mutating the Model.</li>
</ol>
<p>We can override the default matching behavior by providing a Matcher as the optional third argument. We will cover this in later chapters.</p>
<p>Let&apos;s take a closer look at the Updater function:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-keyword">return</span> {
    ...model,
    greeted: <span class="hljs-literal">true</span>
  };
}
</code></pre>
<p>As you can see, all it does is take the current Model as an argument and outputs a new Model with some changes. It&apos;s very important that you <strong>always return a brand new Model object in the Updater function</strong>. Otherwise <code>redux</code> wouldn&apos;t know the Model has changed and therefore wouldn&apos;t re-render your View. That&apos;s why we use the ES2015 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank">spread operator</a> to create a new copy of the model with only the field we want (<code>greeted</code>) changed.</p>
<h3 id="side-effects">Side Effects</h3>
<p>You might have spotted the asterisk symbol in the function definition:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>*(<span class="hljs-params">model</span>) </span>{

}
</code></pre>
<p>The asterisk in a function defintion means that the function is a generator. <strong>redux-elm requires that all your Updater functions be Generators</strong>. This gives us a way to work with side effects in the Updaters.</p>
<p>So what are side effects? We&apos;ve already mentioned that that has somehow changed. You might have noticed again the similarity with a mathematical function:</p>
<pre><code>y = f(x);
</code></pre><p>or</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> value = <span class="hljs-built_in">Math</span>.sin(<span class="hljs-built_in">Math</span>.PI);
</code></pre>
<p>or</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> currentModel = updater(previousModel, action);
</code></pre>
<p>See the similarities? Calling <code>Math.sin</code> does not mutate anything outside the function or trigger anything that is not related witoth the function itself (AJAX calls, logging...). In Functional Programming lingo, we refer to functions with no side effects as <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank">pure functions</a>. A pure function is a function that does have any side effects. Every time you call the function with the same arguments, it returns the same result. In Redux we benefit from a number of cools features thanks to pure Reducers:</p>
<ul>
<li>Easy unit testing</li>
<li>Time travel</li>
<li>Dev tools to view Action history</li>
<li>Undo/Redo</li>
<li>...and many others</li>
</ul>
<p>Calling <code>console.log</code> directly in an Updater, for example, would be considered an impurity and therefore the Updater (Reducer) wouldn&apos;t be a pure function.</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">updater</span>(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is impurity&apos;</span>);

  <span class="hljs-keyword">return</span> model + <span class="hljs-number">1</span>;
}
</code></pre>
<p>Let&apos;s take a closer look at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank">Generators</a>. We won&apos;t delve into all the details, but a Generator function is basically like a plain old JavaScript function except that it can <code>yield</code> values. Yielding causes the Generator to halt, at which point the caller can process the yielded value and then tell the Generator to continue.</p>
<p>We can leverage this behavior and use the <code>yield</code> keyword for returning side effects without executing them directly in the Updater and sullying its pureness. Just imagine the you wrap all the side effects in functions and then yield these functions. These functions will not be executed inside the Updater but rather declaratively describes some side effect.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> sideEffect = () =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is execution of some side effect&apos;</span>);
}
</code></pre>
<p>See? Unless you call the function, the side effect is not executed. Therefore if we <code>yield</code> these functions in our Updaters, we keep them pure. A nice thing about Generators is that you can <code>yield</code> as many values as you need.</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">updater</span>(<span class="hljs-params">model</span>) </span>{
  <span class="hljs-keyword">yield</span> () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is first impurity&apos;</span>);
  <span class="hljs-keyword">yield</span> () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;This is second impurity&apos;</span>);

  <span class="hljs-keyword">return</span> model + <span class="hljs-number">1</span>;
}
</code></pre>
<p>This Updater function yields two side effects <strong>which are not executed in the Updater</strong> and also returns the mutated Model. We are using the example of logging here, but it is very common in a Redux applications for Reducers to have side effects that call a remote API to retrieve data.</p>
<p>So how are these side effects useful when we just said that they are not executed? The side effects are stored and executed right after the Updater mutates the Model. A good way to understand this is to take a look at a library called <a href="https://github.com/salsita/redux-side-effects" target="_blank">redux-side-effects</a>. It does exactly what we need, which is to collect all the yielded values in the Updater and execute them &quot;out of order&quot; after the Updater has returned.</p>

                            
                            </section>
                        </div>
                    </div>
                
            </div>

            
                
                <a href="necessary-boilerplate.html" class="navigation navigation-prev " aria-label="Previous page: Necessary boilerplate">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../gif-viewer/" class="navigation navigation-next " aria-label="Next page: GifViewer tutorial">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>
</div>

        
    <script src="../gitbook/app.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/buttons.js"></script>
        
    
    <script>
    require(["gitbook"], function(gitbook) {
        gitbook.start({"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}}});
    });
    </script>

    </body>
</html>
